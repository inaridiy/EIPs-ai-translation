---
original: 0d4977083d2b68254de521550a65d63023f71e9aaa059e2b8e18bae4b03715b1
---

---
eip: 3521
title: アクセスリストのコストを削減する
author: Matt Garnett (@lightclient)
discussions-to: https://ethereum-magicians.org/t/eip-3521-reduce-access-list-cost/6072
status: 停滞
type: Standards Track
category: Core
created: 2021-04-15
requires: 2028, 2930
---

## 簡単な要約

`tx.to`ストレージキーをアクセスリストに宣言するコストを削減する。

## 動機

現在、トランザクションは `tx.to`で少なくとも25個の異なるストレージスロットを読み取る必要があり、アクセスリストを使用しないのが高価になります。

```
ACCESS_LIST_ADDRESS_COST + (ACCESS_LIST_STORAGE_KEY_COST + WARM_STORAGE_READ_COST) * x = COLD_SLOAD_COST * x
x = 24
```

EIP-2930では、ストレージキーが存在するアドレスを明示的に宣言する必要があります。これは、EIP-2929の `accessed_addresses`リストに追加する必要があるためです。ただし、`tx.to`は特別なケースで、デフォルトで追加されるため、`tx.to`に対して `ACCESS_LIST_ADDRESS_COST`を支払うことは本質的に同じアドレスに2回支払うことになります。ここでの過剰な支払いを避けることで、アクセスリストを使用するのが5つの一意の読み取りだけ安くなり、より魅力的なオプションになります。

## 仕様

アクセスリストの最初の `tx.to`の出現を、ガス会計の目的で `calldata`として扱う。 `ACCESS_LIST_ADDRESS_COST`は請求しない。アドレスの下のストレージキーは影響を受けません。

`tx.to == nil`の場合、`tx.to`はトランザクションによって作成された派生コントラクトアドレスと定義されます。

## 根拠

### なぜ請求するのか?

EIP-2930は、アクセスリストを簡単に理解およびバリデーションできるように特別に書かれています。アクセスリストに `tx.to`を明示的に含めないように構造を変更することは可能かもしれませんが、これはEIP-2930の精神に反することになります。

### なぜ `calldata`として請求するのか?

`calldata`のコストは、EIP-2028で徹底的に分析され、サービス拒否攻撃の影響を受けにくい公正な値が決定されました。これは、トランザクションデータに対して課金する最低限の金額と考えています。 `tx.to`を `accessed_addresses`マップに追加するための計算負荷はないため(EIP-2929によってデフォルトで追加される)、データに対して最小限以上の料金を請求する理由はありません。

## テストケース
```
{
    "0xffffffffffffffffffffffffffffffffffffffff": []
}
cost = 320

{
    "0x00ffffffffffffffffffffffffffffffffffffff": []
}
cost = 308

{
    "0xffffffffffffffffffffffffffffffffffffffff": []
    "0xffffffffffffffffffffffffffffffffffffffff": []
}
cost = 2720

{
    "0xffffffffffffffffffffffffffffffffffffffff": [
        "0x00"
    ]
    "0xffffffffffffffffffffffffffffffffffffffff": []
}
cost = 4620

{
    "0xffffffffffffffffffffffffffffffffffffffff": [
        "0x00"
    ]
    "0xffffffffffffffffffffffffffffffffffffffff": [
        "0x00"
    ]
}
cost = 6520
```

## 下位互換性
問題はありません。

## セキュリティ上の考慮事項
なし。

## 著作権
[CC0](../LICENSE.md)によりワイバーされた著作権およびそれに関連する権利。