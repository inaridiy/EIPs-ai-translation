---
original: 18d627e86107fc58059c1c9954306b7fb204fa5ed2a030d3c1ad7f3fb14b680c
---

---
eip: 698
title: オペコード 0x46 BLOCKREWARD
author: Cody Burns <dontPanic@codywburns.com>
discussions-to: https://github.com/ethereum/EIPs/issues/698
status: 停滞
type: Standards Track
category: Core
created: 2017-08-28
---

## 簡単な要約

このEIPは、EVM(Ethereum Virtual Machine)に新しいオペコードを追加し、最終的なブロック報酬の値を返すようにするものです。

## 概要

EVM内の0x40オペコードは「ブロック情報」用に予約されています。現在予約されているオペコードは以下のとおりです:
* `0X40 BLOCKHASH`
* `0X41 COINBASE`
* `0X42 TIMESTAMP`
* `0X43 NUMBER`
* `0X44 DIFFICULTY`
* `0X45 GASLIMIT`

このEIPでは、`0x46 BLOCKREWARD`という新しいオペコードを追加し、最終的なブロック報酬を返すようにします。最終的なブロック報酬には、ベース報酬、叔父ブロック報酬、ガス代が含まれます。

## 動機

EIP-649(#669)によると、定期的なブロック報酬の減少/変動が今後のロードマップに組み込まれる予定ですが、このEIPはコンセンサスシステムに依存せず、分散型プールの運営や、ブロック報酬の支払いを必要とする(例えば、マージ・マイニングされたトークンなどの)契約に最も有用です。

## 仕様

ブロック `n` 以降、すべてのクライアントは以下のようにオペコード `0x46` を処理する必要があります:

* 値: `0x46`
* ニーモニック: `BLOCKREWARD`
* δ: `0` スタックから何も削除しない
* α: `1` ブロック報酬をスタックに追加する
* 説明: `ブロックの報酬発行を取得する`
* ガスコスト: `G<sub>base</sub>`

ここで: `µ'<sub>s</sub>[0] ≡ I<sub>HR</sub>`

## 根拠

### コントラクト マイニング プール

分散型コンセンサスシステム(ステーキングプールやマイニングプール)では、ペイアウトの変動を減らすために、リソースを集めて共同で検証を行います。一般的に、プールの運営は、マイナー/ステーカーの集団が、PoWやステーキングの確率を表す解を定期的に提出することで機能します。

これらのスキームでは、`B`はプールフィーを差し引いたブロック報酬を表し、`p`はブロックを見つける確率(`p=1/D`、ここで`D`は現在のブロック難易度)を表します。

一般的なマイニングプールのペイアウト方式には、pay-per-share(`R = B * p`)、proportional(`R = B * (n/N)`、ここで`n`はマイナーのシェア数、`N`はその回合のすべてのシェア数)、pay-per-last-N-shares(`R = B * (n/N)`、ここでマイナーの報酬は最後の`N`個のシェアに基づいて計算される)などがあります。これらすべての方式は、与えられたブロックの報酬を知ることを前提としています。信頼最小化された解決策を提供するために、`0x46`を使ってブロック報酬を呼び出すことができます。

### マージ・マイニングされたトークン

コントラクトは、`0x46`を呼び出してブロック報酬を関数として取得することで、可変的に'鋳造'されるトークンを作成できます。

## 下位互換性

### 現在展開されているコントラクト
影響はありません。

### 現在のクライアント
このEIPは、`0x46`を処理できないクライアントとは互換性がなく、オペコードを含むすべてのトランザクションとブロックを無効と見なします。
実装は、調整されたハードフォークの一部として行う必要があります。

## 実装

## 参考文献

[マイニングプール](https://en.wikipedia.org/wiki/Mining_pool)

The Yellow Paper Appendix H. Virtual Machine Specification section H.2

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。