---
original: aa849c9855ec1474b8114b47bce7a3879adc2bec3b9f5795eb63f448cdb178fc
---

---
eip: 7666
title: アイデンティティプリコンパイルをEVM化する
description: アイデンティティプリコンパイルを削除し、同等の機能を持つEVMコードを導入する
author: Vitalik Buterin (@vbuterin)
discussions-to: https://ethereum-magicians.org/t/eip-7561-evm-ify-the-identity-precompile/19445
status: Draft
type: Standards Track
category: Core
created: 2024-03-31
---

## 概要

アドレス `0x04` のアイデンティティプリコンパイルを削除する。この変更が有効になるブロックの開始時に、同じ機能を持つ短いEVMコードをそのコントラクトに配置する。

## 動機

現在のEthereumには多数のプリコンパイルが存在しています。これらのプリコンパイルの半数近くはほとんど使用されておらず、メンテナンスコストの増加、コンセンサスバグのリスク、新しいEthereumクライアント実装(ZK-EVMや形式検証対応言語での実装)の開発努力の増大に寄与しています。

このEIPは、これらのプリコンパイルを優雅に放棄する道筋を提案し、最も単純なプリコンパイルであるアイデンティティプリコンパイル(入力コールデータと同じ返却データを出力する)に対してこの手順を適用する最初のステップです。アイデンティティプリコンパイルは当初、メモリコピーが一般的な操作であり、直接実行できるオペコードがなかったため導入されました。その後、オペコードに対して許容される基準が変化し、[EIP-5656](eip-5656.md)でMCOPYオペコードが導入されました。そのため、アイデンティティプリコンパイルを削除し、その機能を複製する極小のEVMコードに置き換えることができます。

将来的には、この手法を、あまり使用されていないハッシュ関数やMODEXPなどの、より複雑なプリコンパイルにも適用できます。

## 仕様

| パラメータ | 値 |
| - | - |
| `IDENTITY_PRECOMPILE_ADDRESS` | `0x0000....0004` |
| `EVM_CODE`    |  `0x365f5f37365ff3` |

この変更が有効になるブロックの開始時に、`IDENTITY_PRECOMPILE_ADDRESS`のコードを`EVM_CODE`に設定する。その後のブロックから、`IDENTITY_PRECOMPILE_ADDRESS`はプリコンパイルとして扱われなくなる。

## 根拠

与えられた`EVM_CODE`は以下に相当します:

```
CALLDATASIZE PUSH0 PUSH0 CALLDATACOPY CALLDATASIZE PUSH0 RETURN
```

これはコールデータをメモリにコピーし、同じメモリスライスを返します。したがって、この変更はEthereumに最小限の影響を与え、機能を維持しつつ、プリコンパイルの数を1つ減らすことができます。

## 下位互換性

`EVM_CODE`の機能はアイデンティティプリコンパイルと同じです。ガスコストはわずかに異なりますが、Ethereumエコシステムではガス価格の変更が何度も行われており、その影響は十分に理解されています。

## セキュリティ上の考慮事項

新しい機能が導入されたり、より安価になったりするわけではないため、セキュリティ上の懸念はありません。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)で放棄されています。