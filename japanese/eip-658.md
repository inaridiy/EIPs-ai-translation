---
original: dc2ae297aa9f49680d76e2589b173a7af6caf9c422dce1d198d6381c4561fe3f
---

---
eip: 658
title: レシートにトランザクションのステータスコードを埋め込む
author: Nick Johnson <nick@ethereum.org>
type: Standards Track
category: Core
status: Final
created: 2017-06-30
requires: 140
---

## 概要
このEIPは、レシートの中間状態ルートフィールドを、トップレベルのコールが成功したか失敗したかを示すステータスコードに置き換えます。

## 動機
EIP140でREVERTオペコードが導入されたことにより、ユーザーがトランザクションが全ガスを消費したら失敗したと仮定することはできなくなりました。その結果、呼び出し側がトランザクションが成功したかどうか、およびそのトランザクションに含まれる状態変更が適用されたかどうかを判断する明確なメカニズムがありません。

フルノードはトランザクションをリプレイすることでリターンステータスと値を取得できますが、ピボットポイント以降のノードしかこれを行えません。ライトノードはこれを行えません。したがって、コンセンサス外のソリューションは実用的ではありません。

代わりに、EIP98で既に廃止された中間状態ルートを、リターンステータス(成功は1、失敗は0)に置き換えることを提案します。これにより、呼び出し側がステータスを判断できるようになり、以前はレシートに含まれていなかったリターンデータも提供できます。

## 仕様
BYZANTIUM_FORK_BLKNUM以降のブロックでは、中間状態ルートがステータスコードに置き換えられます。0は失敗(トランザクションやトップレベルのコールをリバートさせる可能性のある操作によるもの)、1は成功を示します。

## 根拠
これは、トランザクションの成功/失敗状態を取得できるようにする最小限の変更です。既存の機能を保持しつつ、Metropolisへの追加作業を最小限に抑えることができます。

## 著作権
著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。