---
original: b5ae18ad0509d6ce16614f132b70792f094560fd43feb3a5becbf973eaed7a22
---

---
eip: 1227
title: 難易度爆弾の無効化と報酬の初期化
author: SmeargleUsedFly (@SmeargleUsedFly)
discussions-to: https://github.com/ethereum/EIPs/issues/1227
status: 停滞
type: Standards Track
category: Core
created: 2018-07-18
requires: 649
---

## 簡単な要約
このEIPは、「難易度爆弾」を永久に無効化し、ブロック報酬をByzantium以前のレベルにリセットすることを提案します。

## 概要
`FORK_BLKNUM`以降、クライアントは追加の指数関数的な要素なしで難易度を計算します。さらに、ブロック報酬は5 ETHの基本に調整され、叔父報酬と甥報酬も相応に調整されます。

## 動機
「難易度爆弾」(「氷河期」とも呼ばれる)により、ネットワークアップグレードの際に、ユーザーがフォーク後のチェーンに残ることが非常に困難になります。これは、スケジュールされたネットワークアップグレードの場合には望ましい効果ですが、ハードフォークに議論の余地のある変更が含まれる場合は特に問題となります。

この状況は既に観察されています。Byzantiumハードフォーク時、ユーザーは更新されたチェーンに従うか、オリジナルのチェーンに残るかの「選択」を迫られましたが、後者のチェーンではブロック時間が30秒を超えていました。実際には、分散化された個人の集まりがそのような条件下でオリジナルのまもなく死滅するチェーンを維持することは不可能です。これは、EIP [#649](./eip-649.md)のような議論の余地のある変更がハードフォーク直前に統合された場合に悪化します。ユーザーはそのような短期間では変更に賛成か反対かを熟考する時間がありません。

結局のところ、難易度爆弾には単一の目的しかありません。それは、ハードフォーク後にオリジナルのチェーンを維持することをより困難にすることです。これは、ユーザーがEIPプロセスではなく、クライアントソフトウェアの実行/不実行によってのみ意見を表明できる場合、つまり実質的に選択肢がなく、したがって権限がない場合は受け入れられません。このEIPは、難易度爆弾を完全に排除し、Ethereumのガバナンスプロセスに対するユーザーとコミュニティの発言権を取り戻すことを提案します。

EIP [#649](./eip-649.md)をめぐる論争を考えると、発行量もByzantium以前のレベルにリセットすべきです。後にさらに減少させることができますが、その場合ユーザーには変更を受け入れるか否かの意味のある選択肢があります。発行量の減少は本提案の焦点ではなく、オプションです。難易度爆弾の無効化が主な関心事です。

## 仕様
#### 難易度調整の指数関数的な要素の削除
`calc_difficulty`の目的で、指数関数的な難易度調整要素`epsilon`、つまり`int(2**((block.number // 100000) - 2))`を単純に削除します。

#### ブロック、叔父、甥の報酬のリセット
イーサの発行量を一定に保つため、ブロック報酬を`new_block_reward`に調整します。ここで

    new_block_reward = 5_000_000_000_000_000_000 if block.number >= FORK_BLKNUM else block.reward

(5E18 wei、または5,000,000,000,000,000,000 wei、または5 ETH)。

同様に、`block.number >= FORK_BLKNUM`の場合に、ブロック`block`に叔父`uncle`が含まれ、`block.number - uncle.number = k`であれば、叔父報酬は

    new_uncle_reward = (8 - k) * new_block_reward / 8

これはByzantium以前のフォーミュラをそのまま使い、`new_block_reward`を適用したものです。

`block.number >= FORK_BLKNUM`の場合の甥報酬は

    new_nephew_reward = new_block_reward / 32

これもByzantium以前のフォーミュラをそのまま使い、`new_block_reward`を適用したものです。

## 根拠
これにより、「氷河期」が永久に無効化されます。また、ブロック報酬をByzantium以前のレベルにリセットします。両方の変更はEIP [#649](./eip-649.md)と同様に指定されているため、クライアント開発者への変更は最小限で済むはずです。

## 下位互換性
このEIPは下位互換性がなく、難易度計算、ブロック報酬、叔父報酬、甥報酬の構造に後方互換性のない変更を導入します。しかし、ユーザーベースの中には議論の余地のある部分もあるでしょう。これがまさにこのEIPが対処しようとする問題です。したがって、特定のブロック番号でのスケジュールされたハードフォークに含めるべきではありません。このEIPは、2つのMetropolisハードフォークの2番目の前に、独立したハードフォークで実装することが提案されます。

## テストケース
今後公開予定。

## 実装
今後公開予定。

## 著作権
著作権およびその関連権利は[CC0](../LICENSE.md)により放棄されています。