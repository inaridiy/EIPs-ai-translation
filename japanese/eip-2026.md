---
original: fac975c3e74c721c7335b2ade434107b5a914df69deea06ca82a378563c395cb
---

---
eip: 2026
title: State Rent H - 固定前払いアカウント
author: Alexey Akhunov (@AlexeyAkhunov)
discussions-to: https://ethereum-magicians.org/t/eip-2026-fixed-rent-prepayment-for-all-accounts-change-h-from-state-rent-v3-proposal/3273
status: 停滞
type: Standards Track
category: Core
created: 2019-05-14
---

## 簡単な要約
新しいアカウント(契約アカウントと非契約アカウントの両方)の作成には、固定の一回限りの家賃前払いが必要です。既存のアカウントは、最初の変更時に同じ前払いが必要です。家賃前払いの行為により、`rentbalance`と呼ばれる追加のフィールドがアカウントに追加されます。このフィールドはステートの一部になります。

## 概要
これは State Rent ロードマップの一部です。この特定の変更は、新しいアカウントをステートに追加することによるステート拡張に対する固定料金を導入します。理論的には、この固定料金をマイニングで再利用できないため、作成できるアカウントの数に上限が設けられます。

## 動機
罰金は取引の送信者に課されます。アカウント作成のガスコストを引き上げる(これではマイナーに対して直接課金されることになる)のではなく、この変更により前払いが特別なフィールド `rentbalance` に入金されるようになります。これにより以下の欠点が解決されます:
1. 前払いはマイニングで再利用できないため、ステートのアカウント数に理論的な上限が設けられます(ただし、この上限に到達することはまずありません)。
2. マイナーが罰金を回避したり、他のユーザーにその回避策を適用したりすることはできません(プライベートな手数料の払い戻しなど)。
3. この前払いは将来の家賃支払いに使用され、0の資金で作成された新しい契約がその同じブロックで退出されないようにします。
4. 自己破壊時に `rentbalance` を払い戻すことができるようになります - 契約が自己破壊されると、`balance` と `rentbalance` の両方が返金されます。
5. 既存のアカウントに対する前払いは、この変更の前にアカウントを蓄積するのを防ぐために必要です。

## 仕様
ブロック `H` 以降、新しく作成されたすべてのアカウントに、256ビットの符号なし整数型の `rentbalance` フィールドが追加されます。
ブロック `H` 以降、新しいアカウントの作成につながる操作では、`ACCOUNT_PREPAYMENT` 額が `tx.origin` から差し引かれ、作成されたアカウントの `rentbalance` フィールドに加算されます。
ブロック `H` 以降、`rentbalance` フィールドのないアカウントを変更する操作では、`ACCOUNT_PREPAYEMENT` 額が `tx.origin` から差し引かれ、変更されたアカウントの `rentbalance` フィールドに加算されます。これは蓄積を防ぐための措置です。

新しいアカウントの作成につながる操作:
1. 未アカウントのアドレスに非ゼロの ETH を送信することによる非契約アカウントの作成
2. `coinbase` がアカウントのないアドレスを指すブロックによる非契約アカウントの作成
3. 引数がアカウントのないアドレスである `SELFDESTRUCT` による非契約アカウントの作成
4. 宛先のない取引でデータを含むことによる、非契約アカウントから契約アカウントへの変換、または契約アカウントの作成
5. `CREATE` または `CREATE2` の実行による、非契約アカウントから契約アカウントへの変換、または契約アカウントの作成

前払いが導入された後は、`tx.origin` からイーサが差し引かれる理由が2つあります: ガスの購入と消費、および前払いのためのガス消費。現在、取引の `gaslimit` は安全限度として機能しており、`gaslimit` * `gasprice` は送信者 (`tx.origin`) が取引から差し引くことを許可する最大 wei 額を表します。
前払いが導入された後も、`gaslimit` * `gasprice` は最大支出額を表しますが、必要に応じてガスの購入と前払いの両方に使用されます。

## 根拠
前払いの導入前は、他の代替案が検討されていました:
1. ガスコストの単純な引き上げ - 動機の項で説明しています。
1. [State Rent提案の最初のバージョン](https://github.com/ledgerwatch/eth_state/blob/master/State_rent.pdf)では、アカウント作成時の追加の徴収はありませんでした。これにより、0の資金で作成された新しい契約がその同じブロックで退出されるという使いづらい問題が生じていました。家賃の実際の導入(2回目または3回目のハードフォーク)まで、State Rent プログラムの恩恵が遅れることになります。
2. [State Rent提案の2番目のバージョン](https://github.com/ledgerwatch/eth_state/blob/master/State_Rent_2.pdf)では、ロックアップの概念がありました。これは前払いとよく似ていますが、ロックアップは将来の家賃支払いをカバーするものではありませんでした。

前払いの制限方法として、`gaslimit` * `gasprice` を使用する代わりに、新しい専用フィールド `prepaymenlimit` をトランザクションに導入するアプローチも考えられます。このフィールドは前払いのみを制限するものです。このアプローチではトランザクション形式の変更と、送信者のユーザーインターフェイスの変更が必要になり、トランザクション実行中にガスと前払いの2つのカウンターを持つ必要があります。

## 下位互換性
この変更は下位互換性がなく、ハードフォークによってアクティブ化する必要があります。
新しいアカウントの作成にはより多くのガスが必要になるため、既存の契約に悪影響を及ぼす可能性があります。これらの悪影響についてはさらに詳しく分析する必要があります。

## テストケース
テストケースは参照実装から生成されます。

## 実装
仕様を洗練および明確化するためのプルーフオブコンセプト実装が行われます。

## 著作権
著作権およびその関連権利は [CC0](../LICENSE.md) で放棄されています。