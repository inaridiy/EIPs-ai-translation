---
original: 220b76c3e9be391d71a398d90e00e148090806b9128d0874d5563257ba911d6c
---

---
eip: 7707
title: アクセスリストプロビジョニングの奨励
description: このEIPは、トランザクション実行の効率を向上させるためにアクセスリストのガスコストパラメーターを更新することを提案しています。
author: Ben Adams (@benaadams), Oleg Iakushkin (@OlegJakushkin)
discussions-to: https://ethereum-magicians.org/t/eip-7707-align-incentives-for-access-list-provisioning/20025
status: Draft
type: Standards Track
category: Core
created: 2024-05-12
requires: 2930
---

## 概要

このEIPは、トランザクションにおけるアクセスリストデータのガスコストを削減し、実行レイヤークライアントのデータロード効率を向上させるためのインセンティブを提供します。

## 動機

[EIP-2930](./eip-2930.md)では、`SLOAD`の事前ウォーミングのメカニズムとして`accessLists`が導入されましたが、ガス節約とペナルティのバランスが取れておらず、実際の使用は限定的で一般的ではありません。各アドレスに含まれるキーが24個以上必要で、1キーあたり25ガス以上の節約がある場合にのみ利益が出ますが、未使用のキーを含むと1900ガスのペナルティがかかるため、43個のキーが必要になります。

このような状況では、通常のトランザクションでは`accessLists`を使用するメリットが少なく、事前の別のトランザクションによって異なるブランチが選択され、アクセスするストレージスロットが若干異なる可能性があります。さらに、大量のSLOADが必要になるまで利益が出ません。

一部のクライアントでは、ブロック実行時間の70%以上がデータロードに費やされています。これは、シーケンシャルなトランザクション実行と、効果的にランダムなアクセスデータの反復検索が原因の一つです。

NVMeドライブには大きなスループットとIOPS性能がありますが、個々のIOPS待ち時間を積み重ねると、最大スループットは得られません。これは、ネットワーク接続ストレージやクラウドデータディスクでも同様の状況です。

ブロック実行に必要なデータを事前にロードできれば、その待ち時間を隠蔽できるため、ブロック実行が高速化・低コスト化されます。また、将来的には、トランザクションの並列実行のためのデータ依存関係ヒントにも役立つでしょう。

## 仕様

[EIP-2930](./eip-2930.md)のパラメーターを以下のように更新します:

| 定数 | 値 |
| - | - |
| `ACCESS_LIST_STORAGE_KEY_COST` | 320 |
| `ACCESS_LIST_ADDRESS_COST` | 512 |

## 根拠

前述のように、ガスコストの利益分析では、ユーザーがアクセスリストのヒントを提供するインセンティブが十分ではありません。そこで、アクセスリストデータのコストを引き下げ、calldata と同等の価格設定にすることを提案します。

アドレスあたり32バイト、ストレージキーあたり20バイトとすると、以下のようになります:

- アドレス: 32 * 4 * 4 = 512 (従来の2400の4.6倍減)
- ストレージキー: 20 * 4 * 4 = 320 (従来の1900の5.9倍減)

これにより、オンチェーンデータの追加コストがcalldata と同等になります。[EIP-2930](./eip-2930.md)の「帯域幅コストをカバーする」という論理は更新されています。

なお、[EIP-3521](./eip-3521.md)では、すでに`ACCESS_LIST_ADDRESS_COST`の削減が提案されています。

### 例

現行

| 命令 | タイプ | アクセスリスト | アドレスあたりのキー数 | OP価格 | アクセスリストキー価格 | アクセスリストアドレス価格 | 1 OPあたりの合計ガス |
|------|------|---------------|------------------|----------|----------------------|-------------------------|------------------|
| `SLOAD` | Cold | 含まれていない | - | 2100 | 0 | 0 | 2100 |
| `SLOAD` | Warm | 含まれていない | - | 100 | 0 | 0 | 100 |
| `SLOAD` | Warm | 含まれている | - | 100 | - | - | 100 |
| `SLOAD` | Cold | 含まれている | 1 | 100 | 1900 | 2400 | 4400 |
| `SLOAD` | None | 含まれている | 1 | 0 | 1900 | 2400 | 4300 |
| `SLOAD` | Cold | 含まれている | 10 | 100 | 1900 | 240 | 2240 |
| `SLOAD` | None | 含まれている | 10 | 0 | 1900 | 240 | 2140 |
| `SLOAD` | Cold | 含まれている | 50 | 100 | 1900 | 48 | 2048 |
| `SLOAD` | None | 含まれている | 50 | 0 | 1900 | 48 | 1948 |

提案

| 命令 | タイプ | アクセスリスト | アドレスあたりのキー数 | OP価格 | アクセスリストキー価格 | アクセスリストアドレス価格 | 1 OPあたりの合計ガス |
|------|------|---------------|------------------|----------|----------------------|-------------------------|------------------|
| `SLOAD` | Cold | 含まれていない | - | 2100 | 0 | 0 | 2100 |
| `SLOAD` | Warm | 含まれていない | - | 100 | 0 | 0 | 100 |
| `SLOAD` | Warm | 含まれている | - | 100 | - | - | 100 |
| `SLOAD` | Cold | 含まれている | 1 | 100 | 320 | 512 | 932 |
| `SLOAD` | None | 含まれている | 1 | 0 | 320 | 512 | 832 |
| `SLOAD` | Cold | 含まれている | 10 | 100 | 320 | 51.2 | 471 |
| `SLOAD` | None | 含まれている | 10 | 0 | 320 | 51.2 | 371 |
| `SLOAD` | Cold | 含まれている | 50 | 100 | 320 | 10.24 | 430 |
| `SLOAD` | None | 含まれている | 50 | 0 | 320 | 10.24 | 330 |

\- 既にウォームアップ時に支払い済み

## 下位互換性

このEIPは、[EIP-2930](./eip-2930.md)に対する軽微な更新です。

## セキュリティ上の考慮事項

[EIP-2930](./eip-2930.md)と同様です。

## 著作権

[CC0](../LICENSE.md)によりすべての著作権およびそれに関連する権利が放棄されています。