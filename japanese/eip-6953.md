---
original: 5f11d2be8ac0a2cb3a18ec96aad7cfd5516becd2b154fb228daa96a300b085bf
---

---
eip: 6953
title: ネットワークアップグレードアクティベーショントリガー
description: Ethereumのネットワークアップグレードアクティベーションメカニズムの網羅的なリスト
author: Tim Beiko (@timbeiko)
discussions-to: https://ethereum-magicians.org/t/eip-6666-network-upgrade-activation-triggers/14047
status: Final
type: Informational
created: 2023-04-28
requires: 2982, 3675, 6122
---

## 概要

このEIPでは、Ethereumのプルーフ・オブ・ワーク時代から最初のマージ後のネットワークアップグレード、Shanghai/Capella、にわたる実行レイヤーとコンセンサスレイヤーで使用されてきた様々なネットワークアップグレードアクティベーショントリガーについて説明します。

## 動機

このEIPは、Ethereumの歴史を通して使用されてきたさまざまなアップグレードアクティベーションパターンを理解するための単一の情報源を提供することを目的としています。これは、今後のアップグレードのアクティベーションメカニズムを網羅的に記録することを目的としたものではありません。読者は、このEIPが別のEIPによって置き換えられない限り、[マージ後のアップグレード](#マージ後のアップグレード)セクションで説明されているメカニズムを使用すると想定する必要があります。

## 仕様

### プルーフ・オブ・ワークネットワークアップグレード

プルーフ・オブ・ワーク時代には、Ethereumのネットワークアップグレードは特定のブロック番号に基づいてトリガーされていました。以下のアップグレードはこのパターンに従っていました:

| アップグレード名    | アクティベーションブロック番号 |
|--------------------|-------------------------|
| Frontier           | `1`                     |
| Frontier Thawing   | `200000`				   |
| Homestead          | `1150000`               |
| DAO Fork           | `1920000`               |
| Tangerine Whistle  | `2463000`               |
| Spurious Dragon    | `2675000`               |
| Byzantium          | `4370000`               |
| Constantinople     | `7280000`               |
| Petersburg         | `7280000`               |
| Istanbul           | `9069000`               |
| Muir Glacier       | `9200000`               |
| Berlin	         | `12244000`              |
| London	         | `12965000`              |
| Arrow Glacier	     | `13773000`              |
| Gray Glacier	     | `15050000`              | 

### ビーコンチェーンの起動

ビーコンチェーンの起動は、[EIP-2982](./eip-2982.md)に詳述された一連の条件に従って行われました。起動は、以下のすべての条件が満たされた時に行われました:

1. ビーコンチェーン預金契約に少なくとも `524288` ETHが `16384` 人のバリデーターから預けられた。
2. `MIN_GENESIS_TIME` タイムスタンプ `1606824000` (2020年12月1日) を超えた。
3. `GENESIS_DELAY` の `604800` 秒が、最小バリデーター数を超えてから経過した。

### ビーコンチェーンアップグレード

ビーコンチェーンのアップグレードは特定のエポックでアクティベーションされます。以下のアップグレードはこのパターンに従っていました:

| アップグレード名 | アクティベーションエポック |
|-----------------|------------------|
| Altair           | `74240`          |
| Bellatrix        | `144896`         |

### マージ: Parisアップグレード

Parisアップグレード(マージの実行レイヤー部分)は、[EIP-3675](./eip-3675.md)で指定された `58750000000000000000000` のプルーフ・オブ・ワークトータル難易度値によってトリガーされました。ベラトリックスアップグレードのアクティベーションがParisアップグレードの前提条件であることに注意してください。

### マージ後のアップグレード

マージ後は、ネットワークアップグレードがコンセンサスレイヤー(CL)のエポックでトリガーされ、理想的にはヒストリカルルーツアキュムレーターの境界(つまり、7192エポックの倍数)にマッピングされます。その後、実行レイヤー(EL)ではそのエポックに対応するタイムスタンプがアクティベーショントリガーとして使用されます。以下のアップグレードはこのパターンに従っていました:

| アップグレード名  | アクティベーションエポック | アクティベーションタイムスタンプ |
|------------------|------------------|----------------------|
| Capella (CL)     | `194048`         |                      |
| Shanghai (EL)    |                  | `1681338455`         |

エポック `194048` がタイムスタンプ `1681338455` に発生したことに注意してください。つまり、実行レイヤーとコンセンサスレイヤーの両方でアップグレードが同時にアクティベーションされましたが、それぞれ異なる定数を使ってトリガーされました。

さらに、実行レイヤーでのタイムスタンプの使用により、ノードの `FORK_HASH` と `FORK_NEXT` の値の計算方法が変更されました。これらの変更は[EIP-6122](./eip-6122.md)で説明されています。

## 根拠

### ブロックとエポック

ブロックとエポックは、Ethereumの状態遷移が発生するレベルを表すため、アップグレードのトリガーポイントとして自然に機能します。

### ターミナル総合難易度

ターミナル総合難易度メカニズムの根拠については、[EIP-3675](./eip-3675.md)を参照してください。

### タイムスタンプ

ビーコンチェーンでスロットが欠落する可能性があるため、実行レイヤーはブロック番号のみに頼ってアップグレードをコンセンサスレイヤーと同期させることはできません。

タイムスタンプは特定のエポックにマッピングされることが保証されており、Unix表現では、以前に使用されていたブロック番号よりも常に大きい値になります。これにより、マージ後の実行レイヤーでアップグレードをトリガーする信頼できる方法が提供され、同時に、タイムスタンプに基づくマージ後のアップグレードが、最後のブロックトリガーアップグレードよりも低い値を使用することはできないことが保証されます。

## セキュリティ上の考慮事項

なし。

## 著作権

[CC0](../LICENSE.md)によりすべての著作権およびそれに関連する権利が放棄されています。