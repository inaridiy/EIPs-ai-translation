---
original: e897dde9ca5c6f7b3d97055e92115931aa038c37a805f1a022e823f757538302
---

---
eip: 1276
title: Constantinople シフト時の難易度爆弾の排除と ブロック報酬の調整
author: EOS Classic (@eosclassicteam)
discussions-to: https://ethereum-magicians.org/t/eip-1276-eliminate-difficulty-bomb-and-adjust-block-reward-on-constantinople-shift/908
type: Standards Track
category: Core
status: Stagnant
created: 2018-07-31
---

## 簡単な要約
平均ブロック時間が、いわゆる「難易度爆弾」と呼ばれる難易度ロジックの影響により増加しています。このEIPは、難易度爆弾を永久に排除し、Constantinople フォークの一部としてブロック報酬を減少させることを提案します。

## 概要
`CNSTNTNPL_FORK_BLKNUM` 以降、クライアントは現在のブロック番号を考慮せずに難易度を計算するようになります。さらに、ブロック報酬は基本2 ETHに調整され、叔父ブロックとネフューブロックの報酬も相応に調整されます。

## 動機
ブロック時間は、ブロックチェーンエコシステムにとって非常に重要な役割を果たしており、プルーフ・オブ・ワーク合意メカニズムの一部として実装されている採掘難易度計算ロジックによって調整されています。昨年、平均ブロック時間が急激に増加したのは、Casperアップグレードの一部として変更される予定だった難易度ロジックの設計ミスが原因でした。しかし、Casperの実装が遅延したため、イーサリアムネットワークでの取引処理の大幅な遅延を防ぐために、難易度爆弾の活性化を遅らせるのは避けられませんでした。

難易度爆弾の活性化を遅らせるハードフォークは成功しましたが、イーサリアムネットワークでCasperプロトコルが実装される前に、難易度爆弾の活性化が再び予想されます。したがって、難易度爆弾を完全に排除するのが、再度の遅延ではなく、ブロック時間の増加に対する最適な対応策です。

また、難易度爆弾の排除と同時にブロック採掘報酬を減少させることで、安定したイーサリアムエコシステムの成長に寄与すると期待されます。現在、イーサリアムはEthashベースのチェーン全体のハッシュレートの92%を占めており、これは膨大なエネルギー消費に相当します。このエネルギー消費には環境コストが関連しているため、ネットワークの参加者には、この費用が必要以上に高くならないよう確保する倫理的義務があります。現時点で、この費用を削減する最も直接的な方法は、ブロック報酬を引き下げてETH採掘の魅力を制限することです。ハッシュレートの管理されない成長は、セキュリティの観点からも好ましくありません。報酬の減少は、イーサリアムがプルーフ・オブ・ステークに移行するにつれ、マイナー主導のチェーンスプリットの可能性も低下させます。

## 仕様
#### 難易度調整の指数関数コンポーネントの削除
`calc_difficulty`の目的で、指数関数の難易度調整コンポーネント、つまり `int(2**((block.number // 100000) - 2))` を単純に削除します。

#### ブロック、叔父ブロック、ネフューブロックの報酬の調整
イーサの発行量を一定に保つため、ブロック報酬を `new_block_reward` に調整します。ここで、

    new_block_reward = 2_000_000_000_000_000_000 if block.number >= CNSTNTNPL_FORK_BLKNUM else block.reward

(2E18 wei、または2,000,000,000,000,000,000 wei、または2 ETH)。

同様に、`block.number >= CNSTNTNPL_FORK_BLKNUM` の場合に、ブロック `block.number - uncle.number = k` の叔父ブロックが含まれている場合、叔父ブロック報酬は

    new_uncle_reward = (8 - k) * new_block_reward / 8

これは、単に `new_block_reward` を使用して調整した、既存のConstantinople以前の叔父ブロック報酬の式です。

`block.number >= CNSTNTNPL_FORK_BLKNUM` の場合のネフューブロック報酬は

    new_nephew_reward = new_block_reward / 32

これは、単に `new_block_reward` を使用して調整した、既存のConstantinople以前のネフューブロック報酬の式です。

## 根拠
これにより、難易度調整アルゴリズムから難易度爆弾を完全に排除できるため、2019年初頭のネットワークの遅延を防ぐことができます。

このEIP-1276は、[EIP-1234](./eip-1234.md)の意図に真っ向から反対するものです。これらについても議論する必要があります。

## 下位互換性
このEIPは下位互換性がなく、難易度計算、ブロック報酬、叔父ブロック報酬、ネフューブロック報酬の構造に後方互換性の問題を導入します。したがって、特定のブロック番号でのスケジュールされたハードフォークに含める必要があります。このEIPを、第二のMetropolisハードフォーク、_Constantinople_に含めることが提案されます。

## テストケース
仕様が開発者に受け入れられるか、クライアントによって実装される場合、テストケースを作成する必要があります。

## 実装
仕様が開発者に受け入れられるか、クライアントによって実装される場合、実装を行う必要があります。

## 著作権
著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。