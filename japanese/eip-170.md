---
original: f766ba8a29903b73b2d1c747be9674487977e0173ef24cd259169708d3558242
---

---
eip: 170
title: コントラクトコードサイズ制限
author: Vitalik Buterin (@vbuterin)
type: Standards Track
category: Core
status: Final
created: 2016-11-04
---

### ハードフォーク
[Spurious Dragon](./eip-607.md)

### パラメータ
- `MAX_CODE_SIZE`: `0x6000` (`2**14 + 2**13`)
- `FORK_BLKNUM`: 2,675,000
- `CHAIN_ID`: 1 (メインネット)

### 仕様

`block.number >= FORK_BLKNUM`の場合、コントラクト作成の初期化が**より多い**`MAX_CODE_SIZE`バイトのデータを返すと、コントラクト作成はガス切れエラーで失敗します。

### 根拠

現在、Ethereumには依然として1つの軽微な二次的な脆弱性が残っています。コントラクトが呼び出されると、呼び出しにかかるガスは一定量ですが、呼び出しによってディスクからコードを読み込む、VMの実行のためにコードを前処理する、ブロックの有効性証明のためにMerkleプルーフにデータを追加するといったO(n)コストが発生します。現在のガスレベルでは、これは最適ではありませんが許容できます。近い将来、ダイナミックガスリミットのルールによってさらに高いガスレベルが引き起こされる可能性があり、これはより大きな懸念となります。これは、最近のサービス拒否攻撃ほど深刻ではありませんが、特に軽量クライアントが有効性または無効性の証明を検証する際に不便になる可能性があります。この解決策は、ブロックチェーンに保存できるオブジェクトのサイズに上限を設けることです。現在のガスリミットで実現可能な値よりわずかに高い値に上限を設定することで、非破壊的に対応できます。

### 参考文献

1. EIP-170 issue and discussion: https://github.com/ethereum/EIPs/issues/170
2. pyethereum implementation: https://github.com/ethereum/pyethereum/blob/5217294871283d8dc4fb3ca9d8a78c7d416490e8/ethereum/messages.py#L397