---
original: 8977f7902a9404462424887f4610b1e890995e6c36a854e648b7fec470b60115
---

---
eip: 2970
title: IS_STATIC オペコード
author: Vitalik Buterin (@vbuterin)
discussions-to: https://ethereum-magicians.org/t/is-static-opcode-useful-for-aa/4609
status: 停滞
type: Standards Track
category: Core
created: 2020-09-13
---

## 簡単な要約

`IS_STATIC (0x4A)` オペコードを追加し、現在のコンテキストが静的である (つまり、`STATICCALL` またはその子孫で実行されており、状態変更操作は不可能) 場合は `1` を、そうでない場合は `0` をプッシュします。

## 概要

## 動機

主な使用例は、アカウントアブストラクション (EIP 2938) を拡張して、アカウントが外部からの静的呼び出し (AA のセキュリティモデルに害はない) を許可できるようにすることです。ただし、状態変更呼び出しは許可しません。

## 仕様

`IS_STATIC (0x4A)` オペコードを追加し、現在のコンテキストが静的である (つまり、`STATICCALL` またはその子孫で実行されており、状態変更操作は不可能) 場合は `1` を、そうでない場合は `0` をプッシュします。

## 根拠

静的性を判断するには、次のようなハッキーな手法を使うことができます。ガスを制限して `CALL` を行い、その `CALL` の中で `LOG` を1つ発行して終了します。コンテキストが静的であれば `CALL` は失敗し、スタックに 0 が残ります。コンテキストが非静的であれば `CALL` は成功します。しかし、このテクニックはガスコストの変更に脆弱であり、無駄が多すぎます。したがって、現状では、コンテキストが静的かどうかを適切に判断する方法も、静的コンテキストと非静的コンテキストで同じ方法で実行されるという不変性も提供されていません。この EIP では、静的性を判断する cleaner な方法を提供します。

## 下位互換性

TBD

## セキュリティ上の考慮事項

TBD

## 著作権
[CC0](../LICENSE.md)により著作権およびそれに関連する権利が放棄されています。