---
original: fc70250e2826d1eb7f339499c180b8139df1010770b2e8a6330e4156659936d1
---

---
eip: 3220
title: クロスチェーン識別子仕様
author: Weijia Zhang (@weijia31415)、Peter Robinson (@drinkcoffee)
discussions-to: https://ethereum-magicians.org/t/eip-3220-crosschain-id-specification/5446
status: 停滞
type: Standards Track
category: Core
created: 2020-10-21
---

## 簡単な要約

フォークに対処する自己検証可能な一意のブロックチェーン識別子。

## 概要

クロスチェーン ID は32バイトの16進文字列で、ブロックチェーンのハッシュから抽出されたいくつかのバイトと、ブロックチェーンを特徴付けるために手動で定義されたものから構成されています。
また、クロスチェーン IDからブロックチェーンのメタデータを取得するための登録およびルックアップサービスを提案します。

## 動機

ビットコインやイーサリアムの成功により、EOS、Ripple、Litecoin、Besu、Wanchain などさまざまなブロックチェーンが開発され、急速に成長しています。また、Hyperledger Fabric、Hyperledger Besu、Stellar、Corda、Quorumなどの非公開およびコンソーシアムブロックチェーンも、許可されたアイデンティティを持つノードのみがブロックチェーンネットワークに参加できるようになっています。パブリックおよびプライベートブロックチェーンの成長は、特に異種で互換性のないこれらのチェーンが関係する場合、チェーン間の相互運用性に課題をもたらしています。Enterprise Ethereum Allianceは、クロスチェーン相互運用性タスクフォース(CITF)を設立し、一般的なクロスチェーンの問題と解決策を検討しています。CITFチームは、ブロックチェーンを特徴付けて説明する一意の識別子がないことに気づきました。EEAクロスチェーン相互運用性タスクフォースの会議と議論で、いくつかの提案が検討されました。

[EIP-155](./eip-155.md)は、リレー攻撃の保護を提供するために、ブロックチェーンを識別する一意の識別子を定義しています。この仕様では、ブロックチェーンのチェーンIDを整数で定義し、トランザクションデータにチェーンIDを署名することで、攻撃者が同じトランザクションを別のブロックチェーンに送信するのを防ぐことができます。この仕様では、ブロックチェーンがチェーンIDを定義し、公開リポジトリに登録する必要があります。

チェーンIDを整数で使用する課題は、すべてのブロックチェーンをカバーするには狭すぎ、同じチェーンIDを持つ別のブロックチェーンを防ぐことができないことです。また、フォークされたブロックチェーンが同じチェーンIDを持つ問題も解決していません。

したがって、特にマルチチェーン操作が関係する場合に、これらの欠点を克服できるより堅牢なブロックチェーン識別子が必要です。ブロックチェーン識別子(クロスチェーン ID)は一意であり、次の要件を満たす必要があります:

* ブロックチェーンの識別、説明、発見を提供する必要があります。
* クロスチェーンサービスエコシステムの各ブロックチェーンを一意に識別する必要があります。
* チェーンID、名前、タイプ、コンセンサススキームなどのブロックチェーンアイデンティティの説明を提供する必要があります。
* サポートされているブロックチェーンと新しいブロックチェーンのための発見メカニズムを提供する必要があります。
* エコシステムに参加するブロックチェーンの登録メカニズムを提供する必要があります。
* ブロックチェーンがプロパティを編集したり、クロスチェーンエコシステムから登録を解除するためのメカニズムを提供する必要があります。
* ブロックチェーンの重要な情報を取得するメカニズムを提供する必要があります。
* 元のブロックチェーンとフォークされたブロックチェーンを区別するメカニズムを提供する必要があります。
* 外部の登録サービスなしでチェーンIDを検証するメカニズムを提供する必要があります。

## 仕様

### 32バイトのクロスチェーン ID の定義

| 名称          | サイズ(バイト) | 説明 |
|---------------|-------------|-------------|
| トランケートされたブロックハッシュ | 16 | これは、ジェネシスブロックのブロックハッシュ、またはブロックチェーンのフォーク直前のブロックハッシュです。16バイトは最下位16バイトです。ネットワークバイトオーダーを前提としています。|
|ネイティブチェーンID| 8 | これは、ブロックチェーンでトランザクションに署名する際に使用する**チェーンID**の値です。**チェーンID**の概念がないブロックチェーンの場合、この値はゼロです。|
|チェーンタイプ| 2 |  0x00は未定義のチェーンタイプとして予約されています。0x01がメインネットタイプ。0x1[0-A]: テストネット、0x2[0-A]: プライベート開発ネットワーク|
| ガバナンス識別子 | 2 |  新しいブロックチェーンの場合、ガバナンス_識別子を指定して、フォークされた/メインチェーンの争いを解決するための元の**オーナー**を識別できます。既存のすべてのブロックチェーンと、**オーナー**の概念がないブロックチェーンの場合、このフィールドはゼロです。 |
| 予約済み | 3 | 将来の使用のために予約されています。現在は000000を使用してください。 |
| チェックサム | 1 | 識別子の整合性を検証するために使用されます。この整合性チェックは、人間がクロスチェーン識別子を誤って入力することを検出することを目的としています。値は、ネットワークバイトオーダーの最下位バイトを使用して、残りの識別子の truncated SHA256 メッセージダイジェストとして計算されます。このチェックサムバイトは、256分の1の確率でのみ整合性を検出します。この確率は、人間が手動でクロスチェーン識別子を入力する際の誤りを検出するという意図された使用法に適しています。 |


## 根拠

ブロックチェーンを表す一意のランダムな16進文字列を使用するなど、さまざまな代替仕様を検討しました。この方法の欠点は、ランダムIDを使用してブロックチェーンの本質的な ID(ジェネシスブロックのブロックハッシュなど)を検証できないことです。2番目の代替案は、クロスチェーン操作のためにジェネシスブロックのハッシュをブロックチェーン ID として使用することです。この欠点は、この ID にはブロックチェーンのプロパティに関する情報がなく、ブロックチェーンがフォークされた場合の問題があることです。

## 下位互換性

クロスチェーン IDは、EIP-155と下位互換性を持つことができます。クロスチェーン IDには、`ネイティブチェーンID`を記録する8バイトのセグメントが含まれています。
イーサリアムチェーンの場合、これをEIP-155で使用することを意図した値として使用できます。

## セキュリティ上の考慮事項

クロスチェーン ID の衝突: 2つのブロックチェーンが同じクロスチェーン IDを含む可能性があり、資産を間違ったブロックチェーンに誤って転送する可能性があります。
このセキュリティ上の懸念は、クロスチェーン IDのハッシュをジェネシスブロックのハッシュと比較することで対処されます。一致する場合、クロスチェーン IDが検証されます。一致しない場合は、フォークされたブロックハッシュとクロスチェーン IDのハッシュを比較します。どのブロックハッシュもクロスチェーン IDのハッシュと一致しない場合、クロスチェーン IDを検証できません。

リレー攻撃の防止: クロスチェーン IDそのものはチェーンIDとは異なり、ブロックチェーントランザクションに署名されませんが、クロスチェーン IDはリレー攻撃を防ぐために使用できます。クロスチェーントランザクションを処理するアプリケーションは、クロスチェーン IDをそのブロックハッシュと照合して、トランザクションが有効かどうかを判断できます。検証できないクロスチェーン IDを持つトランザクションは拒否されるべきです。

クロスチェーン IDはブロックチェーントランザクションに署名する必要はありません。
クロスチェーン IDを暗号的にブロックに署名しないブロックチェーンの場合、クロスチェーン IDはブロック自体で検証できず、クロスチェーン ID仕様に基づいて実装されたスマートコントラクトアドレスやオフチェーンユーティリティで検証する必要があります。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)で放棄されています。