---
original: 9a5f743f3d670ea90561ee413e2536b5c85664761a64a27a638650a3b52a3dca
---

---
eip: 214
title: 新しいオペコード STATICCALL
author: Vitalik Buterin <vitalik@ethereum.org>, Christian Reitwiessner <chris@ethereum.org>
type: Standards Track
category: Core
status: Final
created: 2017-02-13
---

## 簡単な要約

スマートコントラクトのセキュリティを高めるため、このプロポーザルは呼び出し中に状態の変更を許可しない新しいオペコードを追加します。

## 概要

このプロポーザルは、呼び出し中に状態の変更を許可しない新しいオペコードを追加します。状態の変更を試みるオペコード(下記の詳細を参照)は例外を発生させ、変更を行いません。

## 動機

現在、呼び出された契約が提供されたガス量の範囲内で実行可能な操作であれば、何をしても構いません。これにより、スマートコントラクト開発者にとって一定の困難が生じます。通常の呼び出しの後、呼び出された契約の内容を知らない限り、契約の状態について何も仮定できません。さらに、マイナーによって取引の順序が確定される前は、外部からもその順序を確実に知ることはできません。

このEIPは、他の契約を呼び出しつつ、その契約の動作を制限する方法を提供します。静的呼び出しの前後で、すべてのアカウントの状態が同じであると安全に仮定できます。

## 仕様

仮想マシンに新しい `STATIC` フラグを導入します。このフラグは初期状態では `false` に設定されています。サブコールの実行時には、新しいオペコードを除いて、このフラグの値が常に引き継がれます。

オペコード: `0xfa`

`STATICCALL` は `CALL` と同様に機能しますが、引数が6つ(「value」引数は含まれません)で、子コントラクトの実行時に `STATIC` フラグを `true` に設定します。コールが返ると、フラグは呼び出し前の値に戻されます。

`STATIC` フラグが `true` の実行インスタンス内で状態変更操作を試みると、例外が発生します。これらの操作には `CREATE`, `CREATE2`, `LOG0`, `LOG1`, `LOG2`, `LOG3`, `LOG4`, `SSTORE`, `SELFDESTRUCT` が含まれます。また、値が0以外の `CALL` も含まれます。ただし、値が0以外の `CALLCODE` は状態変更とは見なされません。

## 根拠

これにより、明らかに状態を変更しない呼び出しを行うことができ、再入力の問題やその他の問題が発生する可能性がないことを開発者や監査者に保証できます。これは純粋な関数で、出力を返すだけで何も行いません。これにより、純粋な関数型の高水準言語の実装が容易になる可能性があります。

## 下位互換性

このプロポーザルは新しいオペコードを追加しますが、他のオペコードの動作を変更するものではありません。したがって、新しいオペコードを使用しない古い契約、および新しいオペコードを介して呼び出されない契約とは下位互換性があります。

## テストケース

後日作成予定。

## 実装

## 著作権

著作権およびそれに関連する権利は [CC0](../LICENSE.md) で放棄されています。