---
original: 57fe81f9f7cb8a1c55880b5918e8820085e5f74a0b7c0e0bb7c88ab86fdeb20a
---

---
eip: 6789
title: gasをmanaに改名する
description: このEIPは、2015年にVitalik Buterinが提案したように、gasをmanaに改名することを提案しています
author: Pascal Caversaccio (@pcaversaccio)
discussions-to: https://ethereum-magicians.org/t/eip-6789-rename-gas-to-mana/13570
status: 停滞
type: Standards Track
category: Interface
created: 2023-03-27
---

## 概要

このEIPは、2015年にVitalik Buterinが提案したように、`gas`を`mana`に改名することを提案しています。

## 動機

2015年のVitalikの提案を復活させる根本的な動機は、ついにProof-of-Stakeの時代に到達したことと、今後の道筋(つまり「The Surge」、「The Scourge」、「The Verge」、「The Purge」、「The Splurge」)を考えると、このような根本的な意味論的変更を行う最後の機会だと考えられることです。

## 仕様

この文書の中の「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「NOT RECOMMENDED」、「MAY」、「OPTIONAL」というキーワードは、RFC 2119およびRFC 8174に記載されているように解釈されるものとします。

コアタームの`gas`は`mana`に改名されなければなりません。

以下のオペコードは改名されなければなりません:

- `GASPRICE`を`MANAPRICE`に;
- `GASLIMIT`を`MANALIMIT`に; そして
- `GAS`を`MANA`に。

さらに、以下のオペコードの入力パラメータまたは出力は改名されなければなりません:

- `CALL`の`gas`入力パラメータを`mana`に;
- `CALLCODE`の`gas`入力パラメータを`mana`に;
- `DELEGATECALL`の`gas`入力パラメータを`mana`に;
- `STATICCALL`の`gas`入力パラメータを`mana`に;
- `GASLIMIT`の`gasLimit`出力を`manaLimit`に; そして
- `GAS`の`gas`出力を`mana`に。

最後に、以下のRPCエンドポイントは改名されなければなりません:

- `eth_estimateGas`を`eth_estimateMana`に;
- `eth_gasPrice`を`eth_manaPrice`に; そして
- `eth_maxPriorityFeePerGas`を`eth_maxPriorityFeePerMana`に。

RPCエンドポイントの説明も以下のように改名されなければなりません:

- `eth_estimateMana`: トランザクションを完了させるために必要な`mana`の推定量を生成して返します;
- `eth_manaPrice`: 1 `mana`当たりの現在の価格をweiで返します; そして
- `eth_maxPriorityFeePerMana`: 1 `mana`当たりの現在の`maxPriorityFeePerMana`をweiで返します。

## 根拠

- `mana`はProof-of-Stakeの環境への優しさを反映しています;
- `mana`は一般に一時的で譲渡不可能なものと理解されており、`gas`の概念をより良く表しています; そして
- `mana`は一般に再生可能なものとして描かれていますが、(天然の)`gas`は再生不可能です。

## 下位互換性

この提案は、コアタームの`gas`を改名するため、下位互換性はありません。

## テストケース

### 例1

トランザクションが`manaLimit`を超える`mana`を必要とする場合、それは_out-of-mana_トランザクションとして差し戻されます。

### 例2

専用の関数呼び出しに対して新しい`manaleft()`構文(replacing `gasleft()`)を使って使用された`mana`を推定するSolidityコントラクト。

```solidity
// SPDX-License-Identifier: AGPL-3.0
pragma solidity 0.8.19;

contract ManaMetering {
    function oldWay() external view returns (string memory, uint256 manaUsed) {
        string memory hiMom = "Hi Mom, ";
        string memory missYou = "miss you.";
        uint256 startMana = manaleft();
        string memory concat = string(abi.encodePacked(hiMom, missYou));
        manaUsed = startMana - manaleft();
        return (concat, manaUsed);
    }

    function newWay() external view returns (string memory, uint256 manaUsed) {
        string memory hiMom = "Hi Mom, ";
        string memory missYou = "miss you.";
        uint256 startMana = manaleft();
        string memory concat = string.concat(hiMom, missYou);
        manaUsed = startMana - manaleft();
        return (concat, manaUsed);
    }
}
```

Vyperでは、新しいトランザクションプロパティ`msg.mana`(replacing `msg.gas`)を使って同じ動作を再現できます。

### 例3

MetaMaskで`manaLimit`を設定する例:

![MetaMask manaLimit](../assets/eip-6789/MetaMask_ManaLimit.png)

## セキュリティ上の考慮事項

`gas`を`mana`に改名することに直接関連するセキュリティ上の考慮事項はありません。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)により放棄されています。