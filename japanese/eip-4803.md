---
original: 3279e5640ece737a9c28754b70171ee6e5b86f9b3290345333a9f407ebd646b1
---

---
eip: 4803
title: トランザクションガスを最大 2^63-1 に制限する
description: 妥当なトランザクションにはガス制限が必要
author: Alex Beregszaszi (@axic)
discussions-to: https://ethereum-magicians.org/t/eip-4803-limit-transaction-gas-to-a-maximum-of-2-63-1/8296
status: 停滞
type: Standards Track
category: Core
created: 2022-02-02
---

## 概要

トランザクションガスを `0` から `2^63-1` の範囲に制限する。

## 動機

トランザクションのガス制限フィールドは任意長の符号なし整数として指定されているが、さまざまなクライアントがこの値に制限を設けている。このEIPは、合意に基づいた合理的な制限を導入する。

## 仕様

ジェネシスから遡及的に新しい制限を導入する: ガス制限が `2^63-1` を超えるトランザクションは無効であり、ブロックに含めることはできない。

## 根拠

### `2^63-1` vs `2^64-1`

`2^63-1` を選択した理由は、ガス値を符号付き整数として表現できるため、減算後の "ゼロ未満" チェックで out of gas チェックができるためです。

### 現在の制限

RLP エンコーディングの性質上、値の上限は固定されていませんが、ほとんどの実装では 256 ビットに制限しています。さらに、ほとんどのクライアント実装 (geth など) では内部的に 64 ビットのガス値を扱っています。

## 下位互換性

これは breaking change ですが、実際の影響は見られないはずです。

[EIP-1559](./eip-1559.md) 以前は、`gasPrice = 0` のトランザクションを含めることができ、`gasLimit * gasPrice <= accountBalance` の計算により、`gasLimit` の値を任意に大きくできました。しかし、トランザクションリストがブロックガス制限を超えてはいけないという規則と、ブロックガス制限の変更方法に関する厳格な規則により、`gasLimit` の値を任意に大きくすることはできませんでした。

## セキュリティ上の考慮事項

なし。

## テストケース

TBA

## 著作権

著作権およびそれに関連する権利は [CC0](../LICENSE.md) により放棄されています。