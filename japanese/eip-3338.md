---
original: 57ef17b7244ffeaef605c6f23cbb9fb8617d77a7c1dd902162c6e53c7002c35b
---

---
eip: 3338
title: アカウントのノンスを2^52に制限する
author: Micah Zoltu (@MicahZoltu), Alex Beregszaszi (@axic)
discussions-to: https://ethereum-magicians.org/t/eip-2681-limit-account-nonce-to-2-64-1/4324
status: 取り下げられた
withdrawal-reason: [EIP-2681](./eip-2681.md)に取り下げられた
type: Standards Track
category: Core
created: 2021-03-07
---

## 概要

アカウントのノンスを `0` から `2^52` の間に制限する。

## 動機

現在、アカウントのノンスは任意長の符号なし整数として指定されている。状態証拠における任意長データの扱いは最適ではないため、このEIPではノンスをより最適化された方法で表現できるようにする。

また、少なくとも3つの他の提案で改善が求められている取引フォーマットにも有益となる可能性がある。

最後に、ノンスを256ビットの数値として保持する必要がなくなるため、クライアントにおける軽微な最適化が可能になる。

## 仕様

`block.number >= FORK_BLOCK` の場合、以下の2つの制限を導入する:

1. ノンスが `2^52` を超えるトランザクションは無効とみなす。
2. アカウントのノンスが `2^52` の場合、`CREATE` 命令を例外的な停止で中止する。

## 根拠

1. 提案された制限に到達または超えるノンスが発生する可能性は低い。外部トランザクションを使ってその制限に到達するには、少なくとも `21000 * (2^64-1) = 387_381_625_547_900_583_915_000` ガスが必要となる。

2. 過去にMorden testnetでは、各新規アカウントの初期ノンスが `2^20` に設定されていたことに注意が必要である。これはメインネットのトランザクションと区別するためのリプレイ保護の方法であったが、[EIP-155](./eip-155.md)によりチェーン識別子を使う、より洗練された方法が登場している。

3. ほとんどのクライアントはすでにノンスフィールドを64ビットとして扱っている。例えば go-ethereum がそうである。

4. 2^52以下の全ての整数値は、精度の損失なく64ビットの浮動小数点数でエンコードできるため、浮動小数点数しかサポートしていない言語でも扱いやすい。

## 下位互換性

これは breaking change ではあるが、実際の影響は見られないはずである:

1. 現在の状態に、この値を超えるノンスを持つアカウントは存在しない。2020年11月時点で、最高のアカウントノンスを持つのは `0xea674fdde714fd979de3edf0f56aa9716b898ec8` アカウントで、約2900万である。

## セキュリティ上の考慮事項

なし。

## 著作権

[CC0](../LICENSE.md)によりすべての著作権およびそれに関連する権利が放棄されています。